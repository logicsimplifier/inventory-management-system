<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.text.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.control.*?>
<?import java.lang.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.collections.FXCollections?>

<AnchorPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.inventoryapp.controller.DashboardController">
    <BorderPane fx:id="dashboardPane">
       
       <!-- Fixed stylesheet reference -->
       <stylesheets>
            <String fx:value="css/adminDashboard.css" />
        </stylesheets>


        <!-- Top Navigation Bar -->
        <top>
            <HBox styleClass="top-bar" alignment="CENTER_LEFT" spacing="20">
                <padding>
                    <Insets top="10" right="20" bottom="10" left="20"/>
                </padding>
                
                <!-- Logo with corrected image URL -->
                <ImageView fitHeight="40" fitWidth="40" preserveRatio="true">
                    <image>
                        <Image url="@images/logo.png" />
                    </image>
                </ImageView>
                
                <Label text="InventoryPro" styleClass="app-title"/>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- User Info -->
                <HBox alignment="CENTER_RIGHT" spacing="10">
                    <ImageView fitHeight="30" fitWidth="30" preserveRatio="true">
                        <image>
                            <Image url="@images/user.png" />
                        </image>
                    </ImageView>
                    <VBox spacing="2">
                        <Label text="Admin User" styleClass="user-name"/>
                        <Label text="Administrator" styleClass="user-role"/>
                    </VBox>
                    <Button styleClass="icon-button">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/LogOut.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                </HBox>
            </HBox>
        </top>
        
        <!-- Main Content Area -->
        <center>
            <SplitPane dividerPositions="0.2">
                <!-- Sidebar Navigation -->
                <VBox styleClass="sidebar" spacing="10">
                    <padding>
                        <Insets top="20" right="10" bottom="20" left="10"/>
                    </padding>
                    
                    <Button text="Dashboard" styleClass="nav-button" onAction="#showDashboard">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/dashboard.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    
                    <Button text="Inventory" styleClass="nav-button active" onAction="#showInventory">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/inventory.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    
                    <Button text="Products" styleClass="nav-button" onAction="#showProducts">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/products.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    
                    <Button text="Categories" styleClass="nav-button" onAction="#showCategories">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/categories.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    
                    <Button text="Suppliers" styleClass="nav-button" onAction="#showSuppliers">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/suppliers.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    
                    <Button text="Orders" styleClass="nav-button" onAction="#showOrders">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/orders.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    
                    <Button text="Reports" styleClass="nav-button" onAction="#showReports">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/reports.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    
                    <Button text="Role Management" styleClass="nav-button" onAction="#showRoleManagement">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/settings.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    
                    <Region VBox.vgrow="ALWAYS"/>
                    
                    <Button text="Help &amp; Support" styleClass="nav-button help-button" onAction="#showHelp">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <image>
                                    <Image url="@icons/help.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                </VBox>
                
                <!-- Main Content -->
                <StackPane styleClass="content-pane">
                    <!-- Inventory Management View (default) -->
                    <VBox fx:id="inventoryView" styleClass="content-view" spacing="20">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        
                        <!-- Inventory Header -->
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label text="Inventory Management" styleClass="content-title"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <HBox spacing="5" alignment="CENTER_LEFT">
                                <ImageView fitHeight="16" fitWidth="16" preserveRatio="true">
                                    <image>
                                        <Image url="@icons/search.png" />
                                    </image>
                                </ImageView>
                                <TextField fx:id="searchField" promptText="Search inventory..." styleClass="search-field"/>
                            </HBox>

                            <Button text="Add Item" styleClass="primary-button" onAction="#addInventoryItem">
                                <graphic>
                                    <ImageView fitHeight="16" fitWidth="16" preserveRatio="true">
                                        <image>
                                            <Image url="@icons/add.png" />
                                        </image>
                                    </ImageView>
                                </graphic>
                            </Button>
                            <Button text="Export" styleClass="secondary-button" onAction="#exportInventory">
                                <graphic>
                                    <ImageView fitHeight="16" fitWidth="16" preserveRatio="true">
                                        <image>
                                            <Image url="@icons/export.png" />
                                        </image>
                                    </ImageView>
                                </graphic>
                            </Button>
                        </HBox>
                        
                        <!-- Inventory Stats Cards -->
                        <HBox spacing="15" styleClass="stats-container">
                            <VBox styleClass="stat-card">
                                <Label text="1,248" styleClass="stat-value"/>
                                <Label text="Total Items" styleClass="stat-label"/>
                                <HBox alignment="CENTER_LEFT" spacing="5">
                                    <ImageView fitHeight="12" fitWidth="12" preserveRatio="true">
                                        <image>
                                            <Image url="@icons/up.png" />
                                        </image>
                                    </ImageView>
                                    <Label text="12% from last month" styleClass="stat-trend"/>
                                </HBox>
                            </VBox>
                            
                            <VBox styleClass="stat-card">
                                <Label text="328" styleClass="stat-value"/>
                                <Label text="Low Stock" styleClass="stat-label"/>
                                <HBox alignment="CENTER_LEFT" spacing="5">
                                    <ImageView fitHeight="12" fitWidth="12" preserveRatio="true">
                                        <image>
                                            <Image url="@icons/down.png" />
                                        </image>
                                    </ImageView>
                                    <Label text="5% from last month" styleClass="stat-trend"/>
                                </HBox>
                            </VBox>
                            
                            <VBox styleClass="stat-card">
                                <Label text="48,752" styleClass="stat-value"/>
                                <Label text="Total Value" styleClass="stat-label"/>
                                <HBox alignment="CENTER_LEFT" spacing="5">
                                    <ImageView fitHeight="12" fitWidth="12" preserveRatio="true">
                                        <image>
                                            <Image url="@icons/up.png" />
                                        </image>
                                    </ImageView>
                                    <Label text="8% from last month" styleClass="stat-trend"/>
                                </HBox>
                            </VBox>
                            
                            <VBox styleClass="stat-card">
                                <Label text="42" styleClass="stat-value"/>
                                <Label text="Out of Stock" styleClass="stat-label"/>
                                <HBox alignment="CENTER_LEFT" spacing="5">
                                    <ImageView fitHeight="12" fitWidth="12" preserveRatio="true">
                                        <image>
                                            <Image url="@icons/down.png" />
                                        </image>
                                    </ImageView>
                                    <Label text="15% from last month" styleClass="stat-trend"/>
                                </HBox>
                            </VBox>
                        </HBox>
                        
                        <!-- Inventory Table -->
                        <TableView fx:id="inventoryTable" styleClass="inventory-table">
                            <columns>
                                <TableColumn text="ID" fx:id="idColumn" styleClass="table-column"/>
                                <TableColumn text="Product" fx:id="productColumn" styleClass="table-column"/>
                                <TableColumn text="Category" fx:id="categoryColumn" styleClass="table-column"/>
                                <TableColumn text="Stock" fx:id="stockColumn" styleClass="table-column"/>
                                <TableColumn text="Price" fx:id="priceColumn" styleClass="table-column"/>
                                <TableColumn text="Status" fx:id="statusColumn" styleClass="table-column"/>
                                <TableColumn text="Actions" fx:id="actionsColumn" styleClass="table-column"/>
                            </columns>
                        </TableView>
                        
                        <!-- Pagination -->
                        <HBox alignment="CENTER_RIGHT" spacing="10">
                            <Label text="Items per page:" styleClass="pagination-label"/>
                            <ComboBox fx:id="itemsPerPageCombo" styleClass="pagination-combo">
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="10" />
                                        <String fx:value="25" />
                                        <String fx:value="50" />
                                        <String fx:value="100" />
                                    </FXCollections>
                                </items>
                            </ComboBox>
                            <Pagination fx:id="inventoryPagination" styleClass="pagination-control"/>
                        </HBox>
                    </VBox>
                    
                    <!-- Other views will be loaded here dynamically -->
                    <StackPane fx:id="dynamicContent" styleClass="content-view"/>
                </StackPane>
            </SplitPane>
        </center>
        
        <!-- Status Bar -->
        <bottom>
            <HBox styleClass="status-bar" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="5" right="20" bottom="5" left="20"/>
                </padding>
                <Label text="System Status: Online" styleClass="status-text"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Last Updated: Today, 10:45 AM" styleClass="status-text"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Database Connection: Active" styleClass="status-text"/>
            </HBox>
        </bottom>
    </BorderPane>
</AnchorPane>